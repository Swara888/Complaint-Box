{"ast":null,"code":"import{useState}from\"react\";import{Box,Typography,TextField,Button,Card,CardContent}from\"@mui/material\";import API from\"../api/axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SubmitComplaint(){const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[name,setName]=useState(\"\");const[roomNo,setRoomNo]=useState(\"\");const[date,setDate]=useState(\"\");const[category,setCategory]=useState(\"\");const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{await API.post(\"/complaints/\",{name:name,roomNo:roomNo,date:date,category:title,// rename title to category\ndescription:description,priority:\"MEDIUM\",// default priority\nlocation:\"Unknown\"// default location if backend requires\n});alert(\"Complaint submitted successfully!\");navigate(\"/complaints\");// redirect to list\n}catch(err){console.error(\"Full error object:\",err);if(err.response){console.error(\"Status:\",err.response.status);console.error(\"Data:\",err.response.data);}alert(\"Error submitting complaint. Check console for details.\");}};return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Card,{sx:{width:500,borderRadius:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",mb:2,children:\"Submit Complaint\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",value:name,onChange:e=>setName(e.target.value),fullWidth:true,required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{label:\"Room Number\",value:roomNo,onChange:e=>setRoomNo(e.target.value),fullWidth:true,required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{type:\"date\",label:\"Date\",value:date,onChange:e=>setDate(e.target.value),InputLabelProps:{shrink:true},fullWidth:true,required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{label:\"Title\",value:title,onChange:e=>setTitle(e.target.value),fullWidth:true,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Description\",value:description,onChange:e=>setDescription(e.target.value),fullWidth:true,margin:\"normal\",multiline:true,rows:4,required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",sx:{mt:2},fullWidth:true,children:\"Submit\"})]})]})})});}","map":{"version":3,"names":["useState","Box","Typography","TextField","Button","Card","CardContent","API","useNavigate","jsx","_jsx","jsxs","_jsxs","SubmitComplaint","title","setTitle","description","setDescription","name","setName","roomNo","setRoomNo","date","setDate","category","setCategory","navigate","handleSubmit","e","preventDefault","post","priority","location","alert","err","console","error","response","status","data","display","justifyContent","children","sx","width","borderRadius","variant","mb","onSubmit","label","value","onChange","target","fullWidth","required","type","InputLabelProps","shrink","margin","multiline","rows","color","mt"],"sources":["C:/Users/Swarlali/OneDrive/Desktop/Complaint_Box/frontend/src/pages/SubmitComplaint.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Box, Typography, TextField, Button, Card, CardContent } from \"@mui/material\";\r\nimport API from \"../api/axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function SubmitComplaint() {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [roomNo, setRoomNo] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n     await API.post(\"/complaints/\", {\r\n        name: name,\r\n        roomNo: roomNo,\r\n        date: date,\r\n        category: title,        // rename title to category\r\n        description: description,\r\n        priority: \"MEDIUM\",     // default priority\r\n        location: \"Unknown\",    // default location if backend requires\r\n    });\r\n\r\n      alert(\"Complaint submitted successfully!\");\r\n      navigate(\"/complaints\"); // redirect to list\r\n    } catch (err) {\r\n        console.error(\"Full error object:\", err);\r\n        if (err.response) {\r\n            console.error(\"Status:\", err.response.status);\r\n            console.error(\"Data:\", err.response.data);\r\n        }\r\n        alert(\"Error submitting complaint. Check console for details.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\">\r\n      <Card sx={{ width: 500, borderRadius: 3 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h5\" mb={2}>Submit Complaint</Typography>\r\n          <form onSubmit={handleSubmit}>\r\n            <TextField\r\n                label=\"Name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                fullWidth\r\n                required\r\n                sx={{ mb: 2 }}\r\n            />\r\n\r\n            <TextField\r\n            label=\"Room Number\"\r\n            value={roomNo}\r\n            onChange={(e) => setRoomNo(e.target.value)}\r\n            fullWidth\r\n            required\r\n            sx={{ mb: 2 }}\r\n            />\r\n\r\n            <TextField\r\n            type=\"date\"\r\n            label=\"Date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            InputLabelProps={{ shrink: true }}\r\n            fullWidth\r\n            required\r\n            sx={{ mb: 2 }}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Title\"\r\n              value={title}\r\n              onChange={e => setTitle(e.target.value)}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              required\r\n            />\r\n            <TextField\r\n              label=\"Description\"\r\n              value={description}\r\n              onChange={e => setDescription(e.target.value)}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              multiline\r\n              rows={4}\r\n              required\r\n            />\r\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\" sx={{ mt: 2 }} fullWidth>\r\n              Submit\r\n            </Button>\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}