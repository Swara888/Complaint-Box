{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Box,Typography,Button,Divider,Stack}from\"@mui/material\";import{useParams}from\"react-router-dom\";import StatusChip from\"../components/StatusChip\";import API from\"../api/axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ComplaintDetail(){const{id}=useParams();const[complaint,setComplaint]=useState(null);useEffect(()=>{API.get(\"/complaints/\".concat(id,\"/\")).then(res=>setComplaint(res.data)).catch(err=>console.log(err));},[id]);// ✅ Place it here, inside the component but above return\nconst updateStatus=async newStatus=>{try{const res=await API.put(\"/complaints/\".concat(id,\"/\"),{status:newStatus});setComplaint(res.data);// update UI\nalert(\"Status updated to \".concat(newStatus));}catch(err){console.error(err.response||err);alert(\"Error updating status. Check console.\");}};if(!complaint)return null;return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",fontWeight:600,children:complaint.category}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",mt:1,children:complaint.description}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,mt:2,children:[/*#__PURE__*/_jsx(StatusChip,{label:complaint.priority,type:\"priority\"}),/*#__PURE__*/_jsx(StatusChip,{label:complaint.status,type:\"status\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" \",complaint.location]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Materials Required:\"}),\" No\"]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",complaint.name]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Room No:\"}),\" \",complaint.roomNo]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Date:\"}),\" \",complaint.date]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",sx:{mt:2,mr:1},onClick:()=>updateStatus(\"DONE\"),children:\"Mark Done\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"warning\",sx:{mt:2},onClick:()=>updateStatus(\"PENDING\"),children:\"Mark Pending\"})]});}","map":{"version":3,"names":["useEffect","useState","Box","Typography","Button","Divider","Stack","useParams","StatusChip","API","jsx","_jsx","jsxs","_jsxs","ComplaintDetail","id","complaint","setComplaint","get","concat","then","res","data","catch","err","console","log","updateStatus","newStatus","put","status","alert","error","response","p","children","variant","fontWeight","category","color","mt","description","direction","spacing","label","priority","type","sx","my","location","name","roomNo","date","mr","onClick"],"sources":["C:/Users/Swarlali/OneDrive/Desktop/Complaint_Box/frontend/src/pages/ComplaintDetail.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Divider,\r\n  Stack,\r\n} from \"@mui/material\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport StatusChip from \"../components/StatusChip\";\r\nimport API from \"../api/axios\";\r\n\r\nexport default function ComplaintDetail() {\r\n  const { id } = useParams();\r\n  const [complaint, setComplaint] = useState(null);\r\n\r\n  useEffect(() => {\r\n    API.get(`/complaints/${id}/`)\r\n      .then(res => setComplaint(res.data))\r\n      .catch(err => console.log(err));\r\n  }, [id]);\r\n\r\n  // ✅ Place it here, inside the component but above return\r\n  const updateStatus = async (newStatus) => {\r\n    try {\r\n      const res = await API.put(`/complaints/${id}/`, { status: newStatus });\r\n      setComplaint(res.data); // update UI\r\n      alert(`Status updated to ${newStatus}`);\r\n    } catch (err) {\r\n      console.error(err.response || err);\r\n      alert(\"Error updating status. Check console.\");\r\n    }\r\n  };\r\n\r\n  if (!complaint) return null;\r\n\r\n  return (\r\n    <Box p={2}>\r\n      <Typography variant=\"h5\" fontWeight={600}>\r\n        {complaint.category}\r\n      </Typography>\r\n\r\n      <Typography color=\"text.secondary\" mt={1}>\r\n        {complaint.description}\r\n      </Typography>\r\n\r\n      <Stack direction=\"row\" spacing={1} mt={2}>\r\n        <StatusChip label={complaint.priority} type=\"priority\" />\r\n        <StatusChip label={complaint.status} type=\"status\" />\r\n      </Stack>\r\n\r\n      <Divider sx={{ my: 2 }} />\r\n\r\n      <Typography><b>Location:</b> {complaint.location}</Typography>\r\n      <Typography><b>Materials Required:</b> No</Typography>\r\n      <Typography><b>Name:</b> {complaint.name}</Typography>\r\n      <Typography><b>Room No:</b> {complaint.roomNo}</Typography>\r\n      <Typography><b>Date:</b> {complaint.date}</Typography>\r\n\r\n      {/* ✅ Buttons to update status */}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"success\"\r\n        sx={{ mt: 2, mr: 1 }}\r\n        onClick={() => updateStatus(\"DONE\")}\r\n      >\r\n        Mark Done\r\n      </Button>\r\n      <Button\r\n        variant=\"outlined\"\r\n        color=\"warning\"\r\n        sx={{ mt: 2 }}\r\n        onClick={() => updateStatus(\"PENDING\")}\r\n      >\r\n        Mark Pending\r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}